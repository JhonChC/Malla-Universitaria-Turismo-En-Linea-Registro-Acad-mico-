<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Curricular - Licenciatura en Turismo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');

        body {
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #48C9B0 0%, #E8F8F5 40%, #F4ECF7 70%, #FFFFFF 100%);
            background-attachment: fixed;
            padding: 20px 15px;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            max-width: 100%;
            margin: 0 auto;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(155, 89, 182, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(155, 89, 182, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(155, 89, 182, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 90% 20%, rgba(155, 89, 182, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 10% 90%, rgba(155, 89, 182, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 50%, rgba(155, 89, 182, 0.07) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: shimmer 8s ease-in-out infinite;
        }

        /* Part√≠culas flotantes decorativas */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 15% 15%, rgba(72, 201, 176, 0.1) 0%, transparent 30%),
                radial-gradient(circle at 85% 85%, rgba(72, 201, 176, 0.08) 0%, transparent 30%),
                radial-gradient(circle at 50% 50%, rgba(155, 89, 182, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
            animation: float 15s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        body > * {
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px 50px;
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(72, 201, 176, 0.3), 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
            animation: fadeInDown 0.8s ease-out;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(72, 201, 176, 0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shine {
            0% { transform: rotate(0deg) translate(-50%, -50%); }
            100% { transform: rotate(360deg) translate(-50%, -50%); }
        }

        .header h1 {
            color: #2c3e50;
            font-size: 3.2em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 4px;
            font-weight: 800;
            background: linear-gradient(135deg, #48C9B0 0%, #9B59B6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 10px rgba(72, 201, 176, 0.2);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 50px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
            min-width: 200px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .stat-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s;
        }

        .stat-box:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.5);
        }

        .stat-box:hover::before {
            right: 100%;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
        }

        .unit-container {
            margin-bottom: 50px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px 20px;
            border-radius: 25px;
            box-shadow: 0 8px 32px rgba(72, 201, 176, 0.2), 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid rgba(255, 255, 255, 0.5);
            animation: fadeInUp 0.8s ease-out;
            animation-fill-mode: both;
            overflow-x: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .unit-container:nth-child(1) { animation-delay: 0.1s; }
        .unit-container:nth-child(2) { animation-delay: 0.2s; }
        .unit-container:nth-child(3) { animation-delay: 0.3s; }
        .unit-container:nth-child(4) { animation-delay: 0.4s; }
        .unit-container:nth-child(5) { animation-delay: 0.5s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .unit-title {
            font-size: 2.4em;
            margin-bottom: 35px;
            padding-bottom: 20px;
            border-bottom: 4px solid;
            text-align: center;
            font-weight: 800;
            position: relative;
            letter-spacing: 2px;
            width: 100%;
        }

        .unit-title::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, transparent, currentColor, transparent);
            border-radius: 2px;
        }

        .semesters-container {
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .semesters-row {
            display: flex !important;
            flex-direction: row !important;
            flex-wrap: nowrap !important;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center !important;
            align-items: flex-start;
        }

        .semesters-row .semester {
            flex: 0 0 270px !important;
            min-width: 270px !important;
            max-width: 270px !important;
            flex-shrink: 0 !important;
        }

        .semesters-row.row-3,
        .semesters-row.row-4 {
            display: flex !important;
            flex-wrap: nowrap !important;
            flex-direction: row !important;
        }

        .semester {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
            border: 2px solid rgba(255, 255, 255, 0.6);
            transition: all 0.4s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-shrink: 0;
        }

        .semester:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(72, 201, 176, 0.3);
        }

        .semester-title {
            font-size: 1.6em;
            font-weight: 700;
            color: white;
            padding: 18px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .semester-title::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .semester:hover .semester-title::before {
            left: 100%;
        }

        .subject {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 0;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            width: 245px;
            height: 151px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            backdrop-filter: blur(5px);
            overflow: hidden;
        }

        .subject::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s;
        }

        .subject:hover::before {
            left: 100%;
        }

        .subject:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(72, 201, 176, 0.4);
            border-color: rgba(72, 201, 176, 0.5);
        }

        .subject:active {
            transform: translateY(-2px) scale(1.01);
        }

        .subject.practice {
            border: 3px dashed #9C27B0;
            background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
        }

        .subject.practice.completed {
            border: 4px dashed #7B1FA2;
            background: linear-gradient(135deg, #E1BEE7 0%, #CE93D8 100%);
            box-shadow: 0 6px 20px rgba(123, 31, 162, 0.4);
        }

        .subject.project {
            border: 3px dashed #FF6F00;
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            box-shadow: 0 4px 15px rgba(255, 111, 0, 0.3);
        }

        .subject.project.completed {
            border: 4px dashed #E65100;
            background: linear-gradient(135deg, #FFE0B2 0%, #FFCC80 100%);
            box-shadow: 0 6px 20px rgba(230, 81, 0, 0.4);
        }

        .subject.module {
            border: 3px solid #00897B;
            min-height: 70px;
            background: linear-gradient(135deg, rgba(0, 137, 123, 0.1) 0%, rgba(0, 105, 92, 0.05) 100%);
            box-shadow: 0 4px 15px rgba(0, 137, 123, 0.3);
        }

        .subject.module.completed {
            border: 4px solid #00695C;
            box-shadow: 0 6px 20px rgba(0, 105, 92, 0.4);
        }

        .subject.completed {
            border-color: #4DD78B;
            border-width: 3px;
            box-shadow: 0 4px 15px rgba(77, 215, 139, 0.3);
        }

        .subject.completed::after {
            content: '‚úì';
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.8em;
            color: #4DD78B;
            font-weight: bold;
            animation: checkPop 0.5s ease;
            z-index: 3;
        }

        @keyframes checkPop {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .subject.locked {
            opacity: 0.5;
            cursor: pointer;
            background: #f5f5f5;
            position: relative;
        }

        .subject.locked::after {
            content: 'üîí';
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.4em;
            opacity: 0.6;
            z-index: 3;
        }

        .subject.locked:hover {
            transform: translateY(-4px) scale(1.02);
            opacity: 0.7;
        }

        .subject-name {
            font-weight: 700;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            text-align: center;
            padding: 5px 45px 8px 45px;
            border-bottom: 2px solid rgba(0,0,0,0.1);
            line-height: 1.25;
            height: 50%;
            word-wrap: break-word;
            hyphens: auto;
        }

        .subject.dark-text .subject-name,
        .subject.dark-text .subject-info {
            color: #ffffff;
        }

        .subject.dark-text .subject-name {
            border-bottom-color: rgba(255,255,255,0.3);
        }

        .subject.dark-text .subject-info-label,
        .subject.dark-text .subject-info-value {
            color: #ffffff;
        }

        .subject-icon {
            font-size: 1.8em;
            position: absolute;
            top: 12px;
            left: 12px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            transition: transform 0.3s ease;
            z-index: 3;
        }

        .subject:hover .subject-icon {
            transform: scale(1.2) rotate(5deg);
        }

        .subject-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 0.9em;
            color: #555;
            position: relative;
            z-index: 1;
            height: 50%;
            justify-content: center;
            padding: 8px 5px;
        }

        .subject-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .subject-info-label {
            font-weight: 600;
            color: #666;
            font-size: 1em;
        }

        .subject-info-value {
            font-weight: 700;
            color: #2c3e50;
            font-size: 1em;
        }

        .prereq-button {
            background: #5c7cfa;
            color: white;
            border: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(92, 124, 250, 0.3);
        }

        .prereq-button:hover {
            background: #4c6ef5;
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(92, 124, 250, 0.5);
        }

        .prereq-button:active {
            transform: scale(0.95);
        }

        .subject-credits {
            display: none;
        }

        .subject.completed .subject-credits {
            display: block;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 0;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            position: relative;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .modal-header {
            background: #34495e;
            color: white;
            padding: 20px 30px;
            position: relative;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.3em;
            padding-right: 100px;
        }

        .modal-close {
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: #e67e22;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.95em;
        }

        .modal-close:hover {
            background: #d35400;
        }

        .modal-body {
            max-height: 60vh;
            overflow-y: auto;
            padding: 0;
        }

        .modal-body::-webkit-scrollbar {
            width: 10px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .prereq-table {
            width: 100%;
            border-collapse: collapse;
        }

        .prereq-table th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
            font-size: 0.95em;
        }

        .prereq-table td {
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .prereq-row.completed {
            background: #d4edda;
        }

        .prereq-row.completed td:first-child {
            color: #155724;
            font-weight: 500;
        }

        .prereq-row.pending {
            background: #f8d7da;
        }

        .prereq-row.pending td:first-child {
            color: #721c24;
            font-weight: 500;
        }

        .prereq-row.completed td:first-child::before {
            content: "‚úì ";
            font-weight: bold;
            color: #28a745;
            margin-right: 5px;
        }

        .prereq-row.pending td:first-child::before {
            content: "‚úó ";
            font-weight: bold;
            color: #dc3545;
            margin-right: 5px;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.05em;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .legend-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(72, 201, 176, 0.3);
            background: rgba(255, 255, 255, 0.9);
        }

        .legend-box {
            width: 35px;
            height: 35px;
            border-radius: 10px;
            border: 2px solid #ddd;
            transition: transform 0.3s ease;
        }

        .legend-item:hover .legend-box {
            transform: scale(1.1) rotate(5deg);
        }

        .legend-box.completed {
            background: linear-gradient(135deg, #a8e6cf 0%, #80e3aa 100%);
        }

        .legend-box.locked {
            background: #f5f5f5;
            opacity: 0.5;
        }

        .celebration-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            animation: fadeIn 0.3s ease;
        }

        .celebration-modal.active {
            display: flex;
        }

        .celebration-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 50px rgba(72, 201, 176, 0.4);
            animation: bounceIn 0.5s ease;
            position: relative;
            border: 3px solid rgba(72, 201, 176, 0.3);
        }

        .celebration-content.career-complete {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            border: 5px solid #FF6347;
        }

        .celebration-content h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .celebration-content.career-complete h2 {
            color: white;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .celebration-emoji {
            font-size: 4em;
            margin-bottom: 20px;
            animation: pulse 1s infinite;
        }

        .celebration-button {
            background: linear-gradient(135deg, #43A047 0%, #2E7D32 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .celebration-button:hover {
            transform: scale(1.05);
        }

        .celebration-content.career-complete .celebration-button {
            background: linear-gradient(135deg, #FF6347 0%, #DC143C 100%);
            font-size: 1.3em;
            padding: 20px 50px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @media (max-width: 768px) {
            .semesters-container {
                flex-direction: column;
            }

            .semesters-row {
                flex-direction: column !important;
            }

            .semesters-row .semester {
                max-width: 100%;
                min-width: 100%;
                flex: 1 1 auto;
            }

            .semester {
                max-width: 100%;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .modal-content {
                width: 95%;
            }

            .stats {
                gap: 15px;
            }

            .stat-box {
                min-width: 150px;
                padding: 20px 30px;
            }
        }

        @media (min-width: 769px) {
            .semesters-row {
                display: flex !important;
                flex-direction: row !important;
                flex-wrap: nowrap !important;
            }
            
            .semesters-row .semester {
                flex: 0 0 270px !important;
                min-width: 270px !important;
                max-width: 270px !important;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéì Licenciatura en Turismo</h1>
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">Total de Asignaturas</div>
                <div class="stat-value">57</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Materias Aprobadas</div>
                <div class="stat-value" id="approved-count">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Cr√©ditos de la Malla</div>
                <div class="stat-value" id="credits-count">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Cr√©ditos M√≥dulos</div>
                <div class="stat-value" id="module-credits">0</div>
            </div>
            <div class="stat-box" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);">
                <div class="stat-label">Cr√©ditos Totales</div>
                <div class="stat-value" id="total-credits">0</div>
            </div>
            <div class="stat-box" style="background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);">
                <div class="stat-label">Horas Pr√°cticas</div>
                <div class="stat-value" id="practice-hours">0/240</div>
            </div>
            <div class="stat-box" style="background: linear-gradient(135deg, #FF6F00 0%, #E65100 100%);">
                <div class="stat-label">Horas Vinculaci√≥n</div>
                <div class="stat-value" id="project-hours">0/160</div>
            </div>
        </div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box"></div>
                <span>Disponible</span>
            </div>
            <div class="legend-item">
                <div class="legend-box completed"></div>
                <span>Aprobada</span>
            </div>
            <div class="legend-item">
                <div class="legend-box locked"></div>
                <span>Bloqueada</span>
            </div>
        </div>
    </div>

    <div id="curriculum-container"></div>

    <div class="modal-overlay" id="prereq-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Precedencias de la asignatura</h2>
                <button class="modal-close" onclick="closeModal()">Cerrar</button>
            </div>
            <div class="modal-body">
                <table class="prereq-table">
                    <thead>
                        <tr>
                            <th>ASIGNATURAS</th>
                            <th>NIVEL</th>
                        </tr>
                    </thead>
                    <tbody id="modal-prereq-list"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="blocked-modal">
        <div class="modal-content">
            <div class="modal-header" style="background: #dc3545;">
                <h2 id="blocked-modal-title">‚ö†Ô∏è Materia Bloqueada</h2>
                <button class="modal-close" onclick="closeBlockedModal()">Cerrar</button>
            </div>
            <div class="modal-body">
                <p id="blocked-message" style="padding: 20px; font-size: 1.1em; color: #333; text-align: center; line-height: 1.6;"></p>
                <table class="prereq-table">
                    <thead>
                        <tr>
                            <th>ASIGNATURAS FALTANTES</th>
                            <th>NIVEL</th>
                        </tr>
                    </thead>
                    <tbody id="blocked-prereq-list"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="celebration-modal" id="celebration-modal">
        <div class="celebration-content" id="celebration-content">
            <div class="celebration-emoji" id="celebration-emoji">‚úÖ</div>
            <h2 id="celebration-message"></h2>
            <button class="celebration-button" onclick="closeCelebration()">¬°Continuar!</button>
        </div>
    </div>

    <script>
        const curriculum = {
            pre: {
                title: "Unidad Preuniversitaria",
                color: "#008BA3",
                semesters: {
                    PRE: {
                        title: "PRE",
                        titleBg: "#008BA3",
                        colors: ["#E0F7FA", "#B2EBF2", "#80DEEA"],
                        subjects: [
                            { name: "Epistemolog√≠a del Turismo", icon: "üß†", credits: 0, prereq: [] },
                            { name: "Introducci√≥n a la Comunicaci√≥n Acad√©mica", icon: "‚úçÔ∏è", credits: 0, prereq: [] },
                            { name: "Pensamiento Computacional", icon: "üíª", credits: 0, prereq: [] }
                        ]
                    }
                }
            },
            basica: {
                title: "Unidad B√°sica",
                color: "#1B5E20",
                semesters: {
                    "1": {
                        title: "1er Semestre",
                        titleBg: "#1B5E20",
                        colors: ["#E8F5E9", "#C8E6C9", "#A5D6A7", "#81C784", "#66BB6A", "#43A047"],
                        subjects: [
                            { name: "Matem√°tica Financiera", icon: "üí∞", credits: 1.67, prereq: ["Pensamiento Computacional"] },
                            { name: "Tecnolog√≠a Aplicada", icon: "üõ†Ô∏è", credits: 3.33, prereq: ["Pensamiento Computacional"] },
                            { name: "Teor√≠a del Turismo", icon: "üìö", credits: 3.33, prereq: ["Epistemolog√≠a del Turismo"] },
                            { name: "Administraci√≥n", icon: "üìã", credits: 3.33, prereq: ["Introducci√≥n a la Comunicaci√≥n Acad√©mica"] },
                            { name: "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", icon: "üî¨", credits: 1.67, prereq: ["Introducci√≥n a la Comunicaci√≥n Acad√©mica"] },
                            { name: "T√©cnicas de Operaci√≥n Tur√≠stica", icon: "üß≥", credits: 3.33, prereq: ["Epistemolog√≠a del Turismo"] }
                        ]
                    },
                    "2": {
                        title: "2do Semestre",
                        titleBg: "#EF6C00",
                        colors: ["#FFF3E0", "#FFE0B2", "#FFCC80", "#FFB74D", "#FFA726", "#FF9800"],
                        subjects: [
                            { name: "Cosmos Hist√≥rico", icon: "üè∫", credits: 3.33, prereq: ["Teor√≠a del Turismo"] },
                            { name: "Bioentorno Tur√≠stico", icon: "üå±", credits: 3.33, prereq: ["Teor√≠a del Turismo"] },
                            { name: "T√©cnicas de Guiar", icon: "üé§", credits: 3.33, prereq: ["T√©cnicas de Operaci√≥n Tur√≠stica"] },
                            { name: "Hospitalidad", icon: "ü§ù", credits: 3.33, prereq: ["Administraci√≥n"] },
                            { name: "Estad√≠stica Descriptiva Administrativa", icon: "üìä", credits: 1.67, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada"] },
                            { name: "Comunicaci√≥n Oral y Escrita", icon: "üó£Ô∏è", credits: 1.67, prereq: ["Metodolog√≠a de la Investigaci√≥n Cient√≠fica"] }
                        ]
                    },
                    "3": {
                        title: "3er Semestre",
                        titleBg: "#6A1B9A",
                        colors: ["#F3E5F5", "#E1BEE7", "#CE93D8", "#BA68C8", "#AB47BC", "#9C27B0"],
                        subjects: [
                            { name: "Comunidad y Turismo", icon: "üèòÔ∏è", credits: 1.67, prereq: ["Hospitalidad"] },
                            { name: "Gastronom√≠a Ancestral y Patrimonio", icon: "üç≤", credits: 3.33, prereq: ["Hospitalidad"] },
                            { name: "Gesti√≥n Operativa de √Åreas Protegidas", icon: "üèûÔ∏è", credits: 3.33, prereq: ["T√©cnicas de Guiar"] },
                            { name: "Manifestaciones Pl√°sticas Tur√≠sticas", icon: "üé®", credits: 3.33, prereq: ["Cosmos Hist√≥rico", "Comunicaci√≥n Oral y Escrita"] },
                            { name: "Prospecci√≥n Intercultural Ecuatoriana", icon: "üåé", credits: 1.67, prereq: ["Cosmos Hist√≥rico"] },
                            { name: "Contabilidad General", icon: "üìí", credits: 3.33, prereq: ["Estad√≠stica Descriptiva Administrativa"] }
                        ]
                    }
                }
            },
            profesional: {
                title: "Unidad Profesional",
                color: "#FFD150",
                semesters: {
                    "4": {
                        title: "4to Semestre",
                        titleBg: "#AD1457",
                        colors: ["#FCE4EC", "#F8BBD0", "#F48FB1", "#F06292", "#EC407A", "#E91E63"],
                        subjects: [
                            { name: "Finanzas de Corto Plazo", icon: "üìà", credits: 3.33, prereq: ["Contabilidad General"] },
                            { name: "Gesti√≥n Territorial en Turismo", icon: "üèõÔ∏è", credits: 3.33, prereq: ["Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas"] },
                            { name: "Gesti√≥n del Talento Humano por Competencias", icon: "üë•", credits: 2.5, prereq: ["Contabilidad General"] },
                            { name: "Folklore", icon: "üé≠", credits: 1.67, prereq: ["Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana"] },
                            { name: "Codificaci√≥n Tur√≠stica", icon: "üß©", credits: 3.33, prereq: ["Gesti√≥n Operativa de √Åreas Protegidas"] },
                            { name: "Campismo y Recreaci√≥n Tur√≠stica", icon: "‚õ∫", credits: 1.67, prereq: ["Gastronom√≠a Ancestral y Patrimonio", "Comunidad y Turismo"] }
                        ]
                    },
                    "4": {
                        title: "4to Semestre",
                        titleBg: "#AD1457",
                        colors: ["#FCE4EC", "#F8BBD0", "#F48FB1", "#F06292", "#EC407A", "#E91E63"],
                        subjects: [
                            { name: "Finanzas de Corto Plazo", icon: "üìà", credits: 3.33, prereq: ["Contabilidad General"] },
                            { name: "Gesti√≥n Territorial en Turismo", icon: "üèõÔ∏è", credits: 3.33, prereq: ["Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas"] },
                            { name: "Gesti√≥n del Talento Humano por Competencias", icon: "üë•", credits: 2.5, prereq: ["Contabilidad General"] },
                            { name: "Folklore", icon: "üé≠", credits: 1.67, prereq: ["Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana"] },
                            { name: "Codificaci√≥n Tur√≠stica", icon: "üß©", credits: 3.33, prereq: ["Gesti√≥n Operativa de √Åreas Protegidas"] },
                            { name: "Campismo y Recreaci√≥n Tur√≠stica", icon: "‚õ∫", credits: 1.67, prereq: ["Gastronom√≠a Ancestral y Patrimonio", "Comunidad y Turismo"] }
                        ]
                    },
                    "5": {
                        title: "5to Semestre",
                        titleBg: "#FBC02D",
                        colors: ["#FFFDE7", "#FFF9C4", "#FFF59D", "#FFF176", "#FFEE58", "#FFEB3B", "#FFD700"],
                        subjects: [
                            { name: "Arqueolog√≠a", icon: "üóø", credits: 1.67, prereq: ["Folklore"] },
                            { name: "Microeconom√≠a", icon: "üè¶", credits: 3.33, prereq: ["Finanzas de Corto Plazo"] },
                            { name: "Iconograf√≠a Tur√≠stica", icon: "üñºÔ∏è", credits: 1.67, prereq: ["Campismo y Recreaci√≥n Tur√≠stica"] },
                            { name: "Operaci√≥n de Tours", icon: "üöç", credits: 3.33, prereq: ["Codificaci√≥n Tur√≠stica", "Gesti√≥n Territorial en Turismo"] },
                            { name: "Fomento y Regulaciones a la Actividad Tur√≠stica", icon: "‚öñÔ∏è", credits: 3.33, prereq: ["Gesti√≥n del Talento Humano por Competencias"] },
                            { name: "Desarrollo del Turismo Sostenible", icon: "‚ôªÔ∏è", credits: 5, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica"] },
                            { name: "Pr√°cticas Pre Profesionales I", icon: "üíº", credits: 0, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica"] }
                        ]
                    },
                    "6": {
                        title: "6to Semestre",
                        titleBg: "#C62828",
                        colors: ["#FFEBEE", "#FFCDD2", "#EF9A9A", "#E57373", "#EF5350", "#F44336", "#E53935"],
                        subjects: [
                            { name: "Planificaci√≥n Tur√≠stica", icon: "üóìÔ∏è", credits: 5, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible"] },
                            { name: "Gesti√≥n de la Innovaci√≥n y Emprendimiento", icon: "üöÄ", credits: 3.33, prereq: ["Fomento y Regulaciones a la Actividad Tur√≠stica"] },
                            { name: "Animaci√≥n Tur√≠stica", icon: "üé¨", credits: 3.33, prereq: ["Iconograf√≠a Tur√≠stica"] },
                            { name: "Rice - Organizaci√≥n de Eventos", icon: "üìÖ", credits: 1.67, prereq: ["Desarrollo del Turismo Sostenible"] },
                            { name: "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", icon: "üßæ", credits: 1.67, prereq: ["Operaci√≥n de Tours"] },
                            { name: "Macroeconom√≠a", icon: "üåê", credits: 3.33, prereq: ["Microeconom√≠a"] },
                            { name: "Pr√°cticas Pre Profesionales II", icon: "üíº", credits: 0, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Pr√°cticas Pre Profesionales I"] }
                        ]
                    },
                    "7": {
                        title: "7mo Semestre",
                        titleBg: "#1B5E20",
                        colors: ["#E8F5E9", "#C8E6C9", "#A5D6A7", "#81C784", "#66BB6A", "#388E3C", "#2E7D32"],
                        subjects: [
                            { name: "Patrimonio", icon: "üèõÔ∏è", credits: 5, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Planificaci√≥n Tur√≠stica", "Gesti√≥n de la Innovaci√≥n y Emprendimiento", "Animaci√≥n Tur√≠stica", "Rice - Organizaci√≥n de Eventos", "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", "Macroeconom√≠a"] },
                            { name: "Gesti√≥n de Calidad y la Productividad", icon: "‚úÖ", credits: 3.33, prereq: ["Gesti√≥n de la Innovaci√≥n y Emprendimiento"] },
                            { name: "Operaci√≥n de Alimentos y Bebidas", icon: "üçΩÔ∏è", credits: 1.67, prereq: ["Animaci√≥n Tur√≠stica"] },
                            { name: "Operaci√≥n Hotelera", icon: "üè®", credits: 3.33, prereq: ["Sistemas de Registros Tur√≠sticos / Sabre y Amadeus"] },
                            { name: "Sociolog√≠a del Turismo", icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", credits: 3.33, prereq: ["Animaci√≥n Tur√≠stica"] },
                            { name: "Tendencias Tur√≠sticas", icon: "üìà", credits: 1.67, prereq: ["Macroeconom√≠a"] },
                            { name: "Pr√°cticas Pre Profesionales III", icon: "üíº", credits: 0, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Planificaci√≥n Tur√≠stica", "Gesti√≥n de la Innovaci√≥n y Emprendimiento", "Animaci√≥n Tur√≠stica", "Rice - Organizaci√≥n de Eventos", "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", "Macroeconom√≠a", "Pr√°cticas Pre Profesionales I", "Pr√°cticas Pre Profesionales II"] }
                        ]
                    }
                }
            },
            titulacion: {
                title: "Unidad de Titulaci√≥n",
                color: "#FF9292",
                semesters: {
                    "8": {
                        title: "8vo Semestre",
                        titleBg: "#0D47A1",
                        colors: ["#E3F2FD", "#BBDEFB", "#90CAF9", "#64B5F6", "#42A5F5", "#1976D2", "#1565C0"],
                        subjects: [
                            { name: "Formulaci√≥n y Evaluaci√≥n de Proyectos", icon: "üìê", credits: 3.33, prereq: ["Gesti√≥n de Calidad y la Productividad"] },
                            { name: "Integraci√≥n Regional Tur√≠stica", icon: "ü§ù", credits: 5, prereq: ["Patrimonio", "Gesti√≥n de Calidad y la Productividad", "Operaci√≥n de Alimentos y Bebidas", "Operaci√≥n Hotelera", "Sociolog√≠a del Turismo", "Tendencias Tur√≠sticas"] },
                            { name: "Estrategias Comerciales Tur√≠sticas", icon: "üéØ", credits: 3.33, prereq: ["Tendencias Tur√≠sticas"] },
                            { name: "Redacci√≥n del Trabajo de Titulaci√≥n", icon: "üìñ", credits: 1.67, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Planificaci√≥n Tur√≠stica", "Gesti√≥n de la Innovaci√≥n y Emprendimiento", "Animaci√≥n Tur√≠stica", "Rice - Organizaci√≥n de Eventos", "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", "Macroeconom√≠a", "Patrimonio", "Gesti√≥n de Calidad y la Productividad", "Operaci√≥n de Alimentos y Bebidas", "Operaci√≥n Hotelera", "Sociolog√≠a del Turismo", "Tendencias Tur√≠sticas"] },
                            { name: "Apreciaci√≥n del Arte y la Cultura", icon: "üñåÔ∏è", credits: 1.67, prereq: ["Patrimonio"] },
                            { name: "Turismo y Gobernanza", icon: "üèõÔ∏è", credits: 3.33, prereq: ["Operaci√≥n de Alimentos y Bebidas", "Sociolog√≠a del Turismo"] },
                            { name: "Proyecto de Vinculaci√≥n I", icon: "üåê", credits: 0, prereq: ["Patrimonio", "Gesti√≥n de Calidad y la Productividad", "Operaci√≥n de Alimentos y Bebidas", "Operaci√≥n Hotelera", "Sociolog√≠a del Turismo", "Tendencias Tur√≠sticas"] }
                        ]
                    },
                    "9": {
                        title: "9no Semestre",
                        titleBg: "#424242",
                        colors: ["#FAFAFA", "#F5F5F5", "#EEEEEE", "#E0E0E0", "#BDBDBD", "#757575", "#616161"],
                        subjects: [
                            { name: "Gesti√≥n Integral de Destinos Tur√≠sticos", icon: "üåü", credits: 5, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Planificaci√≥n Tur√≠stica", "Gesti√≥n de la Innovaci√≥n y Emprendimiento", "Animaci√≥n Tur√≠stica", "Rice - Organizaci√≥n de Eventos", "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", "Macroeconom√≠a", "Patrimonio", "Gesti√≥n de Calidad y la Productividad", "Operaci√≥n de Alimentos y Bebidas", "Operaci√≥n Hotelera", "Sociolog√≠a del Turismo", "Tendencias Tur√≠sticas", "Formulaci√≥n y Evaluaci√≥n de Proyectos", "Integraci√≥n Regional Tur√≠stica", "Estrategias Comerciales Tur√≠sticas", "Redacci√≥n del Trabajo de Titulaci√≥n", "Apreciaci√≥n del Arte y la Cultura", "Turismo y Gobernanza"] },
                            { name: "T√©cnicas de Negociaci√≥n y Comunicaci√≥n para el Turismo", icon: "ü§ù", credits: 3.33, prereq: ["Estrategias Comerciales Tur√≠sticas"] },
                            { name: "Realidad Nacional y Geopol√≠tica", icon: "üåè", credits: 1.67, prereq: ["Turismo y Gobernanza"] },
                            { name: "Trabajo de Titulaci√≥n", icon: "üéì", credits: 3.33, prereq: ["Redacci√≥n del Trabajo de Titulaci√≥n"] },
                            { name: "Contrataci√≥n P√∫blica", icon: "üìù", credits: 3.33, prereq: ["Formulaci√≥n y Evaluaci√≥n de Proyectos"] },
                            { name: "Liderazgo", icon: "üëë", credits: 1.67, prereq: ["Apreciaci√≥n del Arte y la Cultura"] },
                            { name: "Proyecto de Vinculaci√≥n II", icon: "üåê", credits: 0, prereq: ["Matem√°tica Financiera", "Tecnolog√≠a Aplicada", "Teor√≠a del Turismo", "Administraci√≥n", "Metodolog√≠a de la Investigaci√≥n Cient√≠fica", "T√©cnicas de Operaci√≥n Tur√≠stica", "Cosmos Hist√≥rico", "Bioentorno Tur√≠stico", "T√©cnicas de Guiar", "Hospitalidad", "Estad√≠stica Descriptiva Administrativa", "Comunicaci√≥n Oral y Escrita", "Comunidad y Turismo", "Gastronom√≠a Ancestral y Patrimonio", "Gesti√≥n Operativa de √Åreas Protegidas", "Manifestaciones Pl√°sticas Tur√≠sticas", "Prospecci√≥n Intercultural Ecuatoriana", "Contabilidad General", "Finanzas de Corto Plazo", "Gesti√≥n Territorial en Turismo", "Gesti√≥n del Talento Humano por Competencias", "Folklore", "Codificaci√≥n Tur√≠stica", "Campismo y Recreaci√≥n Tur√≠stica", "Arqueolog√≠a", "Microeconom√≠a", "Iconograf√≠a Tur√≠stica", "Operaci√≥n de Tours", "Fomento y Regulaciones a la Actividad Tur√≠stica", "Desarrollo del Turismo Sostenible", "Planificaci√≥n Tur√≠stica", "Gesti√≥n de la Innovaci√≥n y Emprendimiento", "Animaci√≥n Tur√≠stica", "Rice - Organizaci√≥n de Eventos", "Sistemas de Registros Tur√≠sticos / Sabre y Amadeus", "Macroeconom√≠a", "Patrimonio", "Gesti√≥n de Calidad y la Productividad", "Operaci√≥n de Alimentos y Bebidas", "Operaci√≥n Hotelera", "Sociolog√≠a del Turismo", "Tendencias Tur√≠sticas", "Formulaci√≥n y Evaluaci√≥n de Proyectos", "Integraci√≥n Regional Tur√≠stica", "Estrategias Comerciales Tur√≠sticas", "Redacci√≥n del Trabajo de Titulaci√≥n", "Apreciaci√≥n del Arte y la Cultura", "Turismo y Gobernanza", "Proyecto de Vinculaci√≥n I"] }
                        ]
                    }
                }
            }
        };

        const complementaryModules = {
            title: "üìò M√≥dulos Complementarios",
            color: "#00897B",
            semesters: {
                "ingles": {
                    title: "üåê INGL√âS",
                    titleBg: "#00897B",
                    colors: ["#E53935", "#FF6F00", "#FBC02D", "#43A047", "#1976D2", "#7B1FA2", "#5D4037"],
                    subjects: [
                        { name: "üèÜ Ingl√©s A1-", icon: "üî¥", credits: 2.08, prereq: [] },
                        { name: "üèÜ Ingl√©s A1", icon: "üü†", credits: 2.08, prereq: ["üèÜ Ingl√©s A1-"] },
                        { name: "üèÜ Ingl√©s A2", icon: "üü°", credits: 2.08, prereq: ["üèÜ Ingl√©s A1"] },
                        { name: "üèÜ Ingl√©s B1", icon: "üü¢", credits: 2.08, prereq: ["üèÜ Ingl√©s A2"] },
                        { name: "üèÜ Ingl√©s B2", icon: "üîµ", credits: 2.08, prereq: ["üèÜ Ingl√©s B1"] },
                        { name: "üèÜ Ingl√©s C1", icon: "üü£", credits: 2.08, prereq: ["üèÜ Ingl√©s B2"] },
                        { name: "üèÜ Ingl√©s C2", icon: "üü§", credits: 2.08, prereq: ["üèÜ Ingl√©s C1"] }
                    ]
                },
                "computacion": {
                    title: "üíª COMPUTACI√ìN",
                    titleBg: "#00695C",
                    colors: ["#E0F2F1", "#B2DFDB"],
                    subjects: [
                        { name: "Windows ‚Äì Word ‚Äì Internet", icon: "ü™ü", credits: 8, prereq: [] },
                        { name: "Excel ‚Äì PowerPoint", icon: "üìä", credits: 8, prereq: ["Windows ‚Äì Word ‚Äì Internet"] }
                    ]
                }
            }
        };

        let completedSubjects = new Set();
        let subjectToSemester = {};

        function buildSubjectMap() {
            Object.entries(curriculum).forEach(([unitKey, unit]) => {
                Object.entries(unit.semesters).forEach(([semKey, semester]) => {
                    semester.subjects.forEach(subject => {
                        subjectToSemester[subject.name] = semester.title;
                    });
                });
            });
        }

        function showPrereqModal(subjectName, prereqs) {
            const modal = document.getElementById('prereq-modal');
            const title = document.getElementById('modal-title');
            const list = document.getElementById('modal-prereq-list');
            
            title.textContent = `Precedencias de la asignatura ${subjectName}`;
            list.innerHTML = '';

            if (prereqs.length === 0) {
                list.innerHTML = '<tr><td colspan="2" style="text-align:center; padding:20px; color:#666;">No tiene requisitos previos</td></tr>';
            } else {
                prereqs.forEach(prereq => {
                    const row = document.createElement('tr');
                    const isCompleted = completedSubjects.has(prereq);
                    row.className = `prereq-row ${isCompleted ? 'completed' : 'pending'}`;
                    
                    const nameCell = document.createElement('td');
                    nameCell.textContent = prereq;
                    
                    const levelCell = document.createElement('td');
                    levelCell.textContent = subjectToSemester[prereq] || 'N/A';
                    
                    row.appendChild(nameCell);
                    row.appendChild(levelCell);
                    list.appendChild(row);
                });
            }

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('prereq-modal').classList.remove('active');
        }

        function closeCelebration() {
            document.getElementById('celebration-modal').classList.remove('active');
            document.getElementById('celebration-content').classList.remove('career-complete');
        }

        function showCelebration(message, isCareerComplete = false) {
            const modal = document.getElementById('celebration-modal');
            const content = document.getElementById('celebration-content');
            const messageEl = document.getElementById('celebration-message');
            const emojiEl = document.getElementById('celebration-emoji');
            
            messageEl.textContent = message;
            
            if (isCareerComplete) {
                content.classList.add('career-complete');
                emojiEl.textContent = 'üéì';
            } else {
                content.classList.remove('career-complete');
                emojiEl.textContent = '‚úÖ';
            }
            
            modal.classList.add('active');
        }

        function checkCompletions() {
            // Verificar semestres completos
            Object.entries(curriculum).forEach(([unitKey, unit]) => {
                Object.entries(unit.semesters).forEach(([semKey, semester]) => {
                    const allCompleted = semester.subjects.every(subject => 
                        completedSubjects.has(subject.name)
                    );
                    
                    const celebrationKey = `celebrated-${unitKey}-${semKey}`;
                    if (allCompleted && !localStorage.getItem(celebrationKey)) {
                        localStorage.setItem(celebrationKey, 'true');
                        setTimeout(() => {
                            showCelebration(`‚úÖ Felicidades, has aprobado ${semester.title} ‚úÖ`);
                        }, 300);
                    }
                    
                    // Si se desmarca y ya no est√° completo, remover la celebraci√≥n
                    if (!allCompleted && localStorage.getItem(celebrationKey)) {
                        localStorage.removeItem(celebrationKey);
                    }
                });
            });

            // Verificar m√≥dulos de ingl√©s
            const inglesModules = complementaryModules.semesters.ingles.subjects;
            const allInglesCompleted = inglesModules.every(subject => 
                completedSubjects.has(subject.name)
            );
            if (allInglesCompleted && !localStorage.getItem('celebrated-ingles')) {
                localStorage.setItem('celebrated-ingles', 'true');
                setTimeout(() => {
                    showCelebration('‚úÖ Felicidades, has aprobado todos los m√≥dulos de Ingl√©s ‚úÖ');
                }, 300);
            }
            if (!allInglesCompleted && localStorage.getItem('celebrated-ingles')) {
                localStorage.removeItem('celebrated-ingles');
            }

            // Verificar m√≥dulos de computaci√≥n
            const compModules = complementaryModules.semesters.computacion.subjects;
            const allCompCompleted = compModules.every(subject => 
                completedSubjects.has(subject.name)
            );
            if (allCompCompleted && !localStorage.getItem('celebrated-computacion')) {
                localStorage.setItem('celebrated-computacion', 'true');
                setTimeout(() => {
                    showCelebration('‚úÖ Felicidades, has aprobado todos los m√≥dulos de Computaci√≥n ‚úÖ');
                }, 300);
            }
            if (!allCompCompleted && localStorage.getItem('celebrated-computacion')) {
                localStorage.removeItem('celebrated-computacion');
            }

            // Verificar pr√°cticas pre profesionales
            const practices = [
                'Pr√°cticas Pre Profesionales I',
                'Pr√°cticas Pre Profesionales II',
                'Pr√°cticas Pre Profesionales III'
            ];
            const allPracticesCompleted = practices.every(practice => 
                completedSubjects.has(practice)
            );
            if (allPracticesCompleted && !localStorage.getItem('celebrated-practices')) {
                localStorage.setItem('celebrated-practices', 'true');
                setTimeout(() => {
                    showCelebration('‚úÖ Felicidades, has completado todas tus horas de Pr√°cticas Pre Profesionales ‚úÖ');
                }, 300);
            }
            if (!allPracticesCompleted && localStorage.getItem('celebrated-practices')) {
                localStorage.removeItem('celebrated-practices');
            }

            // Verificar proyectos de vinculaci√≥n
            const projects = [
                'Proyecto de Vinculaci√≥n I',
                'Proyecto de Vinculaci√≥n II'
            ];
            const allProjectsCompleted = projects.every(project => 
                completedSubjects.has(project)
            );
            if (allProjectsCompleted && !localStorage.getItem('celebrated-projects')) {
                localStorage.setItem('celebrated-projects', 'true');
                setTimeout(() => {
                    showCelebration('‚úÖ Felicidades, has completado todas tus horas de tu Proyecto de Vinculaci√≥n ‚úÖ');
                }, 300);
            }
            if (!allProjectsCompleted && localStorage.getItem('celebrated-projects')) {
                localStorage.removeItem('celebrated-projects');
            }

            // Verificar si complet√≥ toda la carrera
            const allSubjects = [];
            Object.values(curriculum).forEach(unit => {
                Object.values(unit.semesters).forEach(semester => {
                    semester.subjects.forEach(subject => allSubjects.push(subject.name));
                });
            });
            Object.values(complementaryModules.semesters).forEach(semester => {
                semester.subjects.forEach(subject => allSubjects.push(subject.name));
            });

            const allCareerCompleted = allSubjects.every(subject => 
                completedSubjects.has(subject)
            );
            
            if (allCareerCompleted && !localStorage.getItem('celebrated-career')) {
                localStorage.setItem('celebrated-career', 'true');
                setTimeout(() => {
                    showCelebration('üßë‚Äçüéìüéì FELICIDADES HAS COMPLETADO TU CARRERA üéìüßë‚Äçüéì', true);
                }, 500);
            }
            if (!allCareerCompleted && localStorage.getItem('celebrated-career')) {
                localStorage.removeItem('celebrated-career');
            }
        }

        document.addEventListener('click', (e) => {
            const modal = document.getElementById('prereq-modal');
            if (e.target === modal) {
                closeModal();
            }
        });

        function loadProgress() {
            const saved = localStorage.getItem('turismo-progress');
            if (saved) {
                completedSubjects = new Set(JSON.parse(saved));
            }
        }

        function saveProgress() {
            localStorage.setItem('turismo-progress', JSON.stringify([...completedSubjects]));
        }

        function isSubjectLocked(prereqs) {
            return prereqs.some(prereq => !completedSubjects.has(prereq));
        }

        function toggleSubject(subjectName, prereqs) {
            const isLocked = isSubjectLocked(prereqs);
            const isCompleted = completedSubjects.has(subjectName);
            
            // Si est√° bloqueada y no est√° completada, mostrar modal
            if (isLocked && !isCompleted) {
                showPrereqModal(subjectName, prereqs);
                return;
            }

            if (completedSubjects.has(subjectName)) {
                completedSubjects.delete(subjectName);
            } else {
                completedSubjects.add(subjectName);
            }

            saveProgress();
            updateSubjectStates();
            calculateStats();
            checkCompletions();
        }

        function updateSubjectStates() {
            // Actualizar solo los estados de las materias sin recargar todo
            document.querySelectorAll('.subject').forEach(subjectEl => {
                const subjectName = subjectEl.dataset.subjectName;
                if (!subjectName) return;

                const isCompleted = completedSubjects.has(subjectName);
                const prereqsStr = subjectEl.dataset.prereqs;
                const prereqs = prereqsStr ? JSON.parse(prereqsStr) : [];
                const isLocked = isSubjectLocked(prereqs);

                // Actualizar clases
                if (isCompleted) {
                    subjectEl.classList.add('completed');
                    subjectEl.classList.remove('locked');
                } else if (isLocked) {
                    subjectEl.classList.add('locked');
                    subjectEl.classList.remove('completed');
                } else {
                    subjectEl.classList.remove('locked', 'completed');
                }
            });
        }

        function calculateStats() {
            let totalCredits = 0;
            let approvedCount = 0;
            let practiceHours = 0;
            let projectHours = 0;
            let moduleCredits = 0;

            Object.values(curriculum).forEach(unit => {
                Object.values(unit.semesters).forEach(semester => {
                    semester.subjects.forEach(subject => {
                        if (completedSubjects.has(subject.name)) {
                            totalCredits += subject.credits;
                            approvedCount++;
                            
                            // Contar horas de pr√°cticas (80 horas cada una)
                            if (subject.name.includes('Pr√°cticas Pre Profesionales')) {
                                practiceHours += 80;
                            }
                            
                            // Contar horas de proyectos de vinculaci√≥n (80 horas cada uno)
                            if (subject.name.includes('Proyecto de Vinculaci√≥n')) {
                                projectHours += 80;
                            }
                        }
                    });
                });
            });

            // Calcular cr√©ditos de m√≥dulos complementarios
            Object.values(complementaryModules.semesters).forEach(semester => {
                semester.subjects.forEach(subject => {
                    if (completedSubjects.has(subject.name)) {
                        moduleCredits += subject.credits;
                    }
                });
            });

            const totalAllCredits = totalCredits + moduleCredits;

            document.getElementById('approved-count').textContent = approvedCount;
            document.getElementById('credits-count').textContent = totalCredits.toFixed(2);
            document.getElementById('module-credits').textContent = moduleCredits.toFixed(2);
            document.getElementById('total-credits').textContent = totalAllCredits.toFixed(2);
            document.getElementById('practice-hours').textContent = `${practiceHours}/240`;
            document.getElementById('project-hours').textContent = `${projectHours}/160`;
        }

        function renderCurriculum() {
            const container = document.getElementById('curriculum-container');
            container.innerHTML = '';

            Object.entries(curriculum).forEach(([unitKey, unit]) => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-container';
                
                const unitTitle = document.createElement('div');
                unitTitle.className = 'unit-title';
                unitTitle.style.borderColor = unit.color;
                unitTitle.style.color = unit.color;
                unitTitle.textContent = unit.title;
                unitDiv.appendChild(unitTitle);

                if (unitKey === 'profesional') {
                    const row1 = document.createElement('div');
                    row1.className = 'semesters-row';
                    const row2 = document.createElement('div');
                    row2.className = 'semesters-row';

                    const semesterKeys = Object.keys(unit.semesters);
                    semesterKeys.slice(0, 2).forEach(key => {
                        row1.appendChild(createSemester(unit.semesters[key]));
                    });
                    semesterKeys.slice(2, 4).forEach(key => {
                        row2.appendChild(createSemester(unit.semesters[key]));
                    });

                    unitDiv.appendChild(row1);
                    unitDiv.appendChild(row2);
                } else {
                    const semestersContainer = document.createElement('div');
                    semestersContainer.className = 'semesters-container';

                    Object.values(unit.semesters).forEach(semester => {
                        semestersContainer.appendChild(createSemester(semester));
                    });

                    unitDiv.appendChild(semestersContainer);
                }

                container.appendChild(unitDiv);
            });

            // Renderizar m√≥dulos complementarios
            const modulesDiv = document.createElement('div');
            modulesDiv.className = 'unit-container';
            
            const modulesTitle = document.createElement('div');
            modulesTitle.className = 'unit-title';
            modulesTitle.style.borderColor = complementaryModules.color;
            modulesTitle.style.color = complementaryModules.color;
            modulesTitle.textContent = complementaryModules.title;
            modulesDiv.appendChild(modulesTitle);

            const modulesContainer = document.createElement('div');
            modulesContainer.className = 'semesters-container';

            Object.values(complementaryModules.semesters).forEach(semester => {
                modulesContainer.appendChild(createSemester(semester, true));
            });

            modulesDiv.appendChild(modulesContainer);
            container.appendChild(modulesDiv);

            calculateStats();
        }

        function createSemester(semester, isModule = false) {
            const semesterDiv = document.createElement('div');
            semesterDiv.className = 'semester';

            const title = document.createElement('div');
            title.className = 'semester-title';
            title.style.backgroundColor = semester.titleBg;
            title.textContent = semester.title;
            semesterDiv.appendChild(title);

            semester.subjects.forEach((subject, index) => {
                const subjectDiv = document.createElement('div');
                subjectDiv.className = 'subject';
                
                const isCompleted = completedSubjects.has(subject.name);
                const isLocked = isSubjectLocked(subject.prereq);
                const isPractice = subject.name.includes('Pr√°cticas Pre Profesionales');
                const isProject = subject.name.includes('Proyecto de Vinculaci√≥n');

                const bgColor = semester.colors[index % semester.colors.length];
                
                if (isPractice) {
                    subjectDiv.classList.add('practice');
                } else if (isProject) {
                    subjectDiv.classList.add('project');
                } else if (isModule) {
                    subjectDiv.classList.add('module');
                    subjectDiv.style.background = bgColor;
                } else {
                    subjectDiv.style.background = bgColor;
                }

                // Agregar clase para texto blanco en posiciones 4, 5, 6 (√≠ndices 3, 4, 5)
                // EXCEPTO para el 5to semestre
                const is5thSemester = semester.title === "5to Semestre";
                if (index >= 3 && index <= 5 && !isPractice && !isProject && !isModule && !is5thSemester) {
                    subjectDiv.classList.add('dark-text');
                }

                // Agregar texto blanco para m√≥dulos de ingl√©s espec√≠ficos
                const isEnglishModule = semester.title === "üåê INGL√âS";
                const englishDarkModules = ["üèÜ Ingl√©s A1-", "üèÜ Ingl√©s B2", "üèÜ Ingl√©s C1", "üèÜ Ingl√©s C2"];
                if (isEnglishModule && englishDarkModules.includes(subject.name)) {
                    subjectDiv.classList.add('dark-text');
                }

                if (isCompleted) {
                    subjectDiv.classList.add('completed');
                } else if (isLocked) {
                    subjectDiv.classList.add('locked');
                }

                const nameDiv = document.createElement('div');
                nameDiv.className = 'subject-name';
                nameDiv.textContent = subject.name;
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'subject-icon';
                iconDiv.textContent = subject.icon;
                
                const infoDiv = document.createElement('div');
                infoDiv.className = 'subject-info';
                
                // Fila de cr√©ditos
                const creditsRow = document.createElement('div');
                creditsRow.className = 'subject-info-row';
                creditsRow.innerHTML = `
                    <span class="subject-info-label">Cr√©ditos:</span>
                    <span class="subject-info-value">${subject.credits > 0 ? subject.credits.toFixed(2) : '0'}</span>
                `;
                
                infoDiv.appendChild(creditsRow);
                
                // Fila de precedencias (solo si tiene prereqs)
                if (subject.prereq && subject.prereq.length > 0) {
                    const prereqRow = document.createElement('div');
                    prereqRow.className = 'subject-info-row';
                    const prereqLabel = document.createElement('span');
                    prereqLabel.className = 'subject-info-label';
                    prereqLabel.textContent = 'Precedencias:';
                    
                    const prereqButton = document.createElement('button');
                    prereqButton.className = 'prereq-button';
                    prereqButton.textContent = 'i';
                    prereqButton.onclick = (e) => {
                        e.stopPropagation();
                        showPrereqModal(subject.name, subject.prereq);
                    };
                    
                    prereqRow.appendChild(prereqLabel);
                    prereqRow.appendChild(prereqButton);
                    infoDiv.appendChild(prereqRow);
                }
                
                subjectDiv.appendChild(iconDiv);
                subjectDiv.appendChild(nameDiv);
                subjectDiv.appendChild(infoDiv);

                // Guardar datos en el elemento para actualizaci√≥n r√°pida
                subjectDiv.dataset.subjectName = subject.name;
                subjectDiv.dataset.prereqs = JSON.stringify(subject.prereq);

                subjectDiv.addEventListener('click', (e) => {
                    if (e.target.classList.contains('prereq-button')) return;
                    
                    // Siempre ejecutar toggle, que internamente decidir√° si mostrar el modal
                    toggleSubject(subject.name, subject.prereq);
                });

                semesterDiv.appendChild(subjectDiv);
            });

            return semesterDiv;
        }

        // Funci√≥n para calcular el brillo de un color
        function getColorBrightness(hexColor) {
            const hex = hexColor.replace('#', '');
            const r = parseInt(hex.substr(0, 2), 16);
            const g = parseInt(hex.substr(2, 2), 16);
            const b = parseInt(hex.substr(4, 2), 16);
            return (r * 299 + g * 587 + b * 114) / 1000;
        }

        buildSubjectMap();
        loadProgress();
        renderCurriculum();
    </script>
</body>
</html>
